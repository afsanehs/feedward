<!-- Navbar -->
<div class="navbar-section">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand mr-5 nav-text-bold" href="<%= root_path %>">Feedward</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="true" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="navbar-collapse collapse" id="navbarColor01">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item mr-4">
            <a class="nav-link" href="#readmore" onClick="setActiveClass()">En savoir plus</a>
          </li>
          <li class="nav-item mr-4">
            <a class="nav-link " href="#howitwork" onClick="setActiveClass()">Comment ça marche?</a>
          </li>
          <li class="nav-item mr-4">
            <a class="nav-link" href="#demo" onClick="setActiveClass()">Démarer une démo</a>
          </li>
        </ul>

        <% if user_signed_in? %>
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link nav-text-bold" href="#">Mon compte</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-text-bold" href="<%=destroy_user_session_path%>">Se déconnecter</a>
          </li>
        </ul>
        <% else %>
        <ul class="navbar-nav ml-auto nav-account">
          <li class="nav-item nav-item--separate">
            <a class="nav-link nav-text-bold" href="<%=new_user_session_path%>">Se connecter</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-text-bold" href="<%=new_user_registration_path%>">S'incrire</a>
          </li>
        </ul>

        <% end %>

      </div>
    </div>
  </nav>
</div>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    setActiveClass()
  });
  function setActiveClass(){
    
    navItems = document.querySelectorAll(".nav-link")
    console.log(navItems)
    navItems.forEach(item =>{
      toggleClass(item)
     item.addEventListener('click', ()=>{
       toggleClass(item)
     })
     
    })
  }
  function toggleClass(item){
    let anchor_value = window.location.hash
    hrefText = item.getAttribute('href');
    console.log(item)
     if(anchor_value === hrefText){
       item.classList.add("active")
      } else{
        item.classList.remove("active")
      }
  }
</script>